(()=>{"use strict";var e={662:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GA_API_SECRET=t.GA_MEASUREMENT_ID=void 0,t.GA_MEASUREMENT_ID="",t.GA_API_SECRET=""},651:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(280);t.default=function(e){e&&((0,o.trackEvent)("color-changed-to",e),chrome.storage.sync.get({color:e}),chrome.contextMenus.update(e,{checked:!0}))}},859:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(791)),c=n(280);t.default=function(e,t,n){return o(this,void 0,void 0,(function*(){(0,c.trackEvent)("color-edit",e);const o=yield(0,i.default)(),r=o.find((t=>t.title===e));r.color=t,r.textColor=n,n||delete r.textColor,chrome.storage.sync.set({colors:o})}))}},791:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(530);t.default=function(){return new Promise((e=>{chrome.storage.sync.get({colors:o.DEFAULT_COLORS},(({colors:t})=>e(t)))}))}},115:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(791)),c=n(530);t.default=function(){var e;return o(this,void 0,void 0,(function*(){const{color:t}=yield chrome.storage.sync.get("color"),n=t||c.DEFAULT_COLOR_TITLE,o=yield(0,i.default)();return null!==(e=o.find((e=>e.title===n)))&&void 0!==e?e:o[0]}))}},167:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(581);t.default=function(){return(0,o.executeInCurrentTab)({func:function(){const e=window.highterAPI.hights.getAllFound();return Array.from(e)}})}},97:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(581);t.default=function(){return(0,o.executeInCurrentTab)({func:function(){const e=[];return window.highterAPI.hights.getAllLost().forEach(((t,n)=>e.push({string:null==t?void 0:t.string,index:n}))),e}})}},906:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(115)),c=n(280),a=n(581);t.default=function(){return o(this,void 0,void 0,(function*(){(0,c.trackEvent)("hight-action","hight");const e=yield(0,i.default)();(0,a.executeInCurrentTab)({func:function(e){window.highterAPI.hight.create(e)},args:[e]})}))}},170:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadPageHights=t.getColorOptions=t.getCurrentColor=t.editColor=t.changeColor=t.getLostHights=t.getHights=t.showHight=t.removeHights=t.removeHight=t.hightText=void 0;var r=n(906);Object.defineProperty(t,"hightText",{enumerable:!0,get:function(){return o(r).default}});var i=n(703);Object.defineProperty(t,"removeHight",{enumerable:!0,get:function(){return o(i).default}});var c=n(192);Object.defineProperty(t,"removeHights",{enumerable:!0,get:function(){return o(c).default}});var a=n(576);Object.defineProperty(t,"showHight",{enumerable:!0,get:function(){return o(a).default}});var u=n(167);Object.defineProperty(t,"getHights",{enumerable:!0,get:function(){return o(u).default}});var s=n(97);Object.defineProperty(t,"getLostHights",{enumerable:!0,get:function(){return o(s).default}});var l=n(651);Object.defineProperty(t,"changeColor",{enumerable:!0,get:function(){return o(l).default}});var h=n(859);Object.defineProperty(t,"editColor",{enumerable:!0,get:function(){return o(h).default}});var d=n(115);Object.defineProperty(t,"getCurrentColor",{enumerable:!0,get:function(){return o(d).default}});var f=n(791);Object.defineProperty(t,"getColorOptions",{enumerable:!0,get:function(){return o(f).default}});var g=n(807);Object.defineProperty(t,"loadPageHights",{enumerable:!0,get:function(){return o(g).default}})},807:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(581);t.default=function(e){(0,o.executeInTab)(e,{func:function(){"function"==typeof window.highterAPI.hights.loadAll&&window.highterAPI.hights.loadAll()}})}},703:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(280),r=n(581);t.default=function(e){(0,o.trackEvent)("hight-action","remove-hight"),(0,r.executeInCurrentTab)({func:function(e){window.highterAPI.hight.removeLost(e)},args:[e]})}},192:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(280),r=n(581);t.default=function(){(0,o.trackEvent)("hight-action","clear-all"),(0,r.executeInCurrentTab)({func:function(){window.highterAPI.hights.deleteAll()}})}},576:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(280),r=n(581);t.default=function(e){(0,o.trackEvent)("hight-action","show-hight"),(0,r.executeInCurrentTab)({func:function(e){window.highterAPI.hight.show(e)},args:[e]})}},280:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.trackEvent=void 0;const r=n(662);function i(){return o(this,void 0,void 0,(function*(){let{uuid:e}=yield chrome.storage.local.get("uuid");return e||(e=crypto.randomUUID(),chrome.storage.local.set({uuid:e}),e)}))}t.trackEvent=function(e,t,n={},c={},a={}){return o(this,void 0,void 0,(function*(){a.session_id||(a.session_id=yield function(){return o(this,void 0,void 0,(function*(){let{sessionData:e}=yield chrome.storage.session.get("sessionData");const t=Date.now();return(null==e?void 0:e.timestamp)&&((t-e.timestamp)/6e4>30?e=null:(e.timestamp=t,yield chrome.storage.session.set({sessionData:e}))),e||(e={session_id:t.toString(),timestamp:t.toString()},yield chrome.storage.session.set({sessionData:e})),e.session_id}))}()),a.engagement_time_msec||(a.engagement_time_msec=100);try{yield fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${r.GA_MEASUREMENT_ID}&api_secrect=${r.GA_API_SECRET}`,{method:"POST",body:JSON.stringify({client_id:yield i(),events:{name:e.replace("-","_"),params:Object.assign(Object.assign(Object.assign({action:t},n&&{label:n}),null!=c&&{value:c}),a)}})})}catch(e){console.error("Google Analytics request failed with an exception",e)}}))}},985:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(0,o(n(901)).default)()},901:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(170),i=n(280),c=n(581);t.default=function(){!function(){chrome.runtime.onInstalled.addListener((()=>o(this,void 0,void 0,(function*(){chrome.contextMenus.removeAll(),chrome.contextMenus.create({title:"Hight",id:"hight",contexts:["selection"]}),chrome.contextMenus.create({title:"Hight color",id:"hight-colors"}),chrome.contextMenus.create({title:"Yellow",id:"yellow",parentId:"hight-colors",type:"radio"}),chrome.contextMenus.create({title:"Blue",id:"blue",parentId:"hight-colors",type:"radio"}),chrome.contextMenus.create({title:"Green",id:"green",parentId:"hight-colors",type:"radio"}),chrome.contextMenus.create({title:"Pink",id:"pink",parentId:"hight-colors",type:"radio"}),chrome.contextMenus.create({title:"Dark",id:"dark",parentId:"hight-colors",type:"radio"});const{title:e}=yield(0,r.getCurrentColor)();chrome.contextMenus.update(e,{checked:!0})}))))}(),chrome.contextMenus.onClicked.addListener((({menuItemId:e,parentMenuItemId:t})=>{if("hight-color"===t)return(0,i.trackEvent)("color-change-source","context-menu"),void(0,r.changeColor)(String(e));"hight"===e&&((0,i.trackEvent)("hight-source","context-menu"),(0,r.hightText)())})),chrome.runtime.onInstalled.addListener((()=>{(0,i.trackEvent)("extension","installed",chrome.runtime.getManifest().version,void 0,{})})),chrome.runtime.onStartup.addListener((()=>{(0,i.trackEvent)("extension","startup",void 0,void 0,{})})),chrome.tabs.onUpdated.addListener(((e,t)=>{t.url&&(0,r.loadPageHights)(e)})),chrome.commands.onCommand.addListener((e=>{switch(e){case"execute-hight":(0,i.trackEvent)("hight-source","keyboard-shortcut"),(0,r.hightText)();break;case"change-color-to-yellow":(0,i.trackEvent)("color-change-source","keyboard-shortcut"),(0,r.changeColor)("yellow");break;case"change-color-to-cyan":(0,i.trackEvent)("color-change-source","keyboard-shortcut"),(0,r.changeColor)("cyan");break;case"change-color-to-lime":(0,i.trackEvent)("color-change-source","keyboard-shortcut"),(0,r.changeColor)("lime");break;case"change-color-to-magenta":(0,i.trackEvent)("color-change-source","keyboard-shortcut"),(0,r.changeColor)("magenta");break;case"change-color-to-dark":(0,i.trackEvent)("color-change-source","keyboard-shortcut"),(0,r.changeColor)("dark")}})),chrome.runtime.onMessage.addListener(((e,t,n)=>{if(e.action)switch(e.action){case"hight":return(0,i.trackEvent)("hight-source","hight-cursor"),void(0,r.hightText)();case"track-event":return void(0,i.trackEvent)(e.trackCategory,e.trackAction);case"remove-hights":return void(0,r.removeHights)();case"remove-hight":return void(0,r.removeHight)(e.hightId);case"change-color":return(0,i.trackEvent)("color-change-source",e.source),void(0,r.changeColor)(e.color);case"edit-color":return void(0,r.editColor)(e.colorTitle,e.color,e.textColor);case"get-hights":return(0,c.wrapResponse)((0,r.getHights)(),n),!0;case"get-lost-hights":return(0,c.wrapResponse)((0,r.getLostHights)(),n),!0;case"show-hight":return(0,r.showHight)(e.hightId);case"get-current-color":return(0,c.wrapResponse)((0,r.getCurrentColor)(),n),!0;case"get-color-options":return(0,c.wrapResponse)((0,r.getColorOptions)(),n),!0}}))}},530:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_COLORS=t.DEFAULT_COLOR_TITLE=void 0,t.DEFAULT_COLOR_TITLE="yellow",t.DEFAULT_COLORS=[{title:"yellow",color:"rgb(255, 246, 21)"},{title:"green",color:"rgb(68, 255, 147)"},{title:"blue",color:"rgb(66, 229, 255)"},{title:"pink",color:"rgb(244, 151, 255)"},{title:"dark",color:"rgb(52, 73, 94)",textColor:"rgb(255, 255, 255)"}]},581:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}u((o=o.apply(e,t||[])).next())}))};function o(e,{file:t,func:o,args:r}){return n(this,void 0,void 0,(function*(){const n=yield chrome.scripting.executeScript(Object.assign(Object.assign({target:{tabId:e,allFrames:!0}},t&&{files:[t]}),{func:o,args:r}));return console.log("come here?"),1===n.length?n[0].result:n.flatMap((e=>e.result))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapResponse=t.executeInTab=t.executeInCurrentTab=void 0,t.executeInCurrentTab=function({file:e,func:t,args:r}){return n(this,void 0,void 0,(function*(){return o((yield function(){return n(this,void 0,void 0,(function*(){const[e]=yield chrome.tabs.query({active:!0,lastFocusedWindow:!0});return e}))}()).id,{file:e,func:t,args:r})}))},t.executeInTab=o,t.wrapResponse=function(e,t){e.then((e=>t({success:!0,response:e}))).catch((e=>t({success:!1,error:e.message})))}}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(985)})();